<!DOCTYPE html><html lang="en"><head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="preconnect" href="//www.googletagmanager.com">
	<link rel="preconnect" href="//zz.bdstatic.com">
	<link rel="preconnect" href="//sp0.baidu.com">
	<link rel="preconnect" href="//www.google-analytics.com">
	<link rel="preconnect" href="//cdn1.lncld.net">
	<link rel="preconnect" href="//unpkg.com">
	<link rel="preconnect" href="//app-router.leancloud.cn">
	<link rel="preconnect" href="//9qpuwspm.api.lncld.net">
	<link rel="preconnect" href="//gravatar.loli.net">

	<title>从零开始设计模式第4章-行为型模式(七种) | ADay Studio</title>

	<meta name="HandheldFriendly" content="True">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
	<meta name="generator" content="hexo">
	<meta name="author" content="むらかわ あかね">
	<meta name="description" content>

	

	
	<link rel="shortcut icon" href="/images/avatar.png">
	<link rel="apple-touch-icon" href="/images/avatar.png">
	

	
	<meta name="theme-color" content="#3c484e">
	<meta name="msapplication-TileColor" content="#3c484e">
	

	

	

	<meta property="og:site_name" content="ADay Studio">
	<meta property="og:type" content="article">
	<meta property="og:title" content="从零开始设计模式第4章-行为型模式(七种) | ADay Studio">
	<meta property="og:description" content>
	<meta property="og:url" content="http://yuumasan.com/2020/03/15/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%AC4%E7%AB%A0/">

	
	<meta property="article:published_time" content="2020-03-15T22:03:00+08:00"> 
	<meta property="article:author" content="むらかわ あかね">
	<meta property="article:published_first" content="ADay Studio, /2020/03/15/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%AC4%E7%AB%A0/">
	

	
	
	
<link rel="stylesheet" href="/css/allinonecss.min.css">


	
	
	
</head>
<body class="post-template">
	<div class="site-wrapper">
		




<header class="site-header post-site-header outer">
    <div class="inner">
        
<nav class="site-nav"> 
    <div class="site-nav-left">
        <ul class="nav">
            <li>
                
                
                
                <a href="/" class="site-nav-logo" style="color:#fff; font-weight: 700; opacity:1;">ADay Studio</a>
                
                
            </li>
            
            
            <li>
                <a href="/" title="主页">主页</a>
            </li>
            
            <li>
                <a href="/categories/从零开始" title="从零开始">从零开始</a>
            </li>
            
            <li>
                <a href="/categories/未定义" title="未定义">未定义</a>
            </li>
            
            <li>
                <a href="/archives" title="归档">归档</a>
            </li>
            
            <li>
                <a href="/links" title="友链">友链</a>
            </li>
            
            <li>
                <a href="/about" title="关于">关于</a>
            </li>
            
            
        </ul> 
    </div>
    
    <div class="search-button-area">
        <a href="#search" class="search-button">Search ...</a>
    </div>
     
    <div class="site-nav-right">
        
        <a href="#search" class="search-button">Search ...</a>
         
        
<div class="social-links">
    
    
    <a class="social-link" title="github" href="https://github.com/AkaneMurakawa" target="_blank" rel="noopener">
        <svg viewBox="0 0 1049 1024" xmlns="http://www.w3.org/2000/svg"><path d="M524.979332 0C234.676191 0 0 234.676191 0 524.979332c0 232.068678 150.366597 428.501342 358.967656 498.035028 26.075132 5.215026 35.636014-11.299224 35.636014-25.205961 0-12.168395-0.869171-53.888607-0.869171-97.347161-146.020741 31.290159-176.441729-62.580318-176.441729-62.580318-23.467619-60.841976-58.234462-76.487055-58.234463-76.487055-47.804409-32.15933 3.476684-32.15933 3.476685-32.15933 53.019436 3.476684 80.83291 53.888607 80.83291 53.888607 46.935238 79.963739 122.553122 57.365291 152.97411 43.458554 4.345855-33.897672 18.252593-57.365291 33.028501-70.402857-116.468925-12.168395-239.022047-57.365291-239.022047-259.012982 0-57.365291 20.860106-104.300529 53.888607-140.805715-5.215026-13.037566-23.467619-66.926173 5.215027-139.067372 0 0 44.327725-13.906737 144.282399 53.888607 41.720212-11.299224 86.917108-17.383422 131.244833-17.383422s89.524621 6.084198 131.244833 17.383422C756.178839 203.386032 800.506564 217.29277 800.506564 217.29277c28.682646 72.1412 10.430053 126.029806 5.215026 139.067372 33.897672 36.505185 53.888607 83.440424 53.888607 140.805715 0 201.64769-122.553122 245.975415-239.891218 259.012982 19.121764 16.514251 35.636014 47.804409 35.636015 97.347161 0 70.402857-0.869171 126.898978-0.869172 144.282399 0 13.906737 9.560882 30.420988 35.636015 25.205961 208.601059-69.533686 358.967656-265.96635 358.967655-498.035028C1049.958663 234.676191 814.413301 0 524.979332 0z"/></svg>
    </a>
    
    
    
    
    
    <a class="social-link" title="bilibili" href="https://space.bilibili.com/4907076" target="_blank" rel="noopener">
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M360.896 183.968l-90.912-88.096s-14.208-17.472 9.824-37.248c24.16-19.648 25.376-10.912 33.504-5.472s135.2 130.816 135.2 130.816zm301.952 3.264l90.912-88.096s14.208-17.472-9.824-37.248c-24.032-19.648-25.376-10.912-33.504-5.472s-135.2 130.816-135.2 130.816zM1004 350.336c-3.264-137.984-123.168-164.192-123.168-164.192s-614.336-4.96-742.496 0C10.176 222.304 20 350.336 20 350.336s1.696 274.272-.128 413.12c13.824 138.848 120.864 160.928 120.864 160.928s42.72.864 73.92.864c3.264 8.992 5.696 52.544 54.24 52.544 48.416 0 54.24-52.544 54.24-52.544s354.88-1.696 384.352-1.696c1.696 14.816 8.992 54.976 57.536 54.24 48.416-.864 51.712-57.536 51.712-57.536s16.384-1.696 65.664 0C997.344 898.88 1004 764.192 1004 764.192s-1.568-275.872 0-413.856zm-98.912 439.232c0 21.728-17.248 39.456-38.464 39.456H167.2c-21.248 0-38.464-17.6-38.464-39.456V326.336c0-21.728 17.248-39.456 38.464-39.456h699.424c21.248 0 38.464 17.6 38.464 39.456zM202.4 457.152l205.344-39.456 15.52 77.184-203.648 39.456zm638.976 0l-205.344-39.456-15.648 77.184 203.776 39.456zm-418.08 191.392s45.152 81.312 95.264-26.336c48.416 105.088 101.824 27.904 101.824 27.904l30.336 19.776s-56.672 91.136-131.424 22.208c-63.232 68.928-129.728-21.952-129.728-21.952z"/></svg>
    </a>
    
    
</div>
    </div>
</nav>
    </div>
</header>


<div id="site-main" class="site-main outer" role="main">
    <div class="inner">
        <header class="post-full-header">
            <div class="post-full-meta">
                <time class="post-full-meta-date" datetime="2020-03-15T14:37:00.000Z">
                    2020-03-15
                </time>
                
                <span class="date-divider">/</span>
                
                <a href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/">从零开始</a>  
                
                <a href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">从零开始设计模式</a>  
                
                
            </div>
            <h1 class="post-full-title">从零开始设计模式第4章-行为型模式(七种)</h1>
        </header>
        <div class="post-full no-image">
            
            <div class="post-full-content">
                <article id="photoswipe" class="markdown-body">
                    <h2 id="1-行为型模式-11种"><a href="#1-行为型模式-11种" class="headerlink" title="1.行为型模式(11种)"></a>1.行为型模式(11种)</h2><ul>
<li>模板模式(Template Pattern)</li>
<li>命令模式(Command Pattern)</li>
<li>访问者模式(Visitor Pattern)</li>
<li>迭代器模式(Iterator Pattern) </li>
<li>观察者模式(Observer Pattern)</li>
<li>中介者模式(Mediator Pattern)</li>
<li>备忘录模式(Memento Pattern)</li>
<li>解释器模式(Interpreter Pattern)</li>
<li>状态模式(State Pattern)</li>
<li>策略模式(Strategy Pattern)</li>
<li>职责链模式(Chain of Responsibility Pattern)</li>
</ul>
<h3 id="1-1-模板模式-Template-Method-Pattern"><a href="#1-1-模板模式-Template-Method-Pattern" class="headerlink" title="1.1 模板模式(Template Method Pattern)"></a>1.1 模板模式(Template Method Pattern)</h3><p>介绍：也叫模板方法模式。定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。一般模板方法都加上final关键字，防止子类重写模板方法。<br>使用场景：</p>
<ol>
<li>有多个子类共有的方法，且逻辑相同。 </li>
<li>重要的、复杂的方法，可以考虑作为模板方法。</li>
</ol>
<p><strong>模板模式的钩子方法</strong><br>在抽象类中，可以定义一个方法，它默认不做任何事情，子类可以视情况覆盖它，该方法称为”钩子”。</p>
<h4 id="1-1-1示例"><a href="#1-1-1示例" class="headerlink" title="1.1.1示例"></a>1.1.1示例</h4><figure class="highlight c#"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">public abstract class AbstractHandler<T> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 模板方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> final String <span class="title">process</span>(<span class="params">T type, String message</span>)</span>{</span><br><span class="line">        <span class="keyword">if</span> (match(type)){</span><br><span class="line">            process(message);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"Y"</span>;</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span> (match()){</span><br><span class="line">            process(message);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"Y"</span>;</span><br><span class="line">        }<span class="keyword">else</span> {</span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">"unknow type"</span>);</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"N"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> String <span class="title">process</span>(<span class="params">String message</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> boolean <span class="title">match</span>(<span class="params">T type</span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 钩子方法</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> boolean <span class="title">match</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> MessageTypeEnum {</span><br><span class="line"></span><br><span class="line">    ORDER(<span class="string">"order"</span>, <span class="string">"订单"</span>),</span><br><span class="line"></span><br><span class="line">    WAREHOUSE(<span class="string">"warehouse"</span>, <span class="string">"仓库"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    MessageTypeEnum(){}</span><br><span class="line"></span><br><span class="line">    MessageTypeEnum(String type, String desc) {</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">        <span class="keyword">this</span>.desc = desc;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public class OrderHandler extends AbstractHandler<MessageTypeEnum> {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">process</span>(<span class="params">String message</span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(message);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Y"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> boolean <span class="title">match</span>(<span class="params">MessageTypeEnum type</span>)</span> {</span><br><span class="line">        <span class="keyword">return</span> MessageTypeEnum.ORDER == type;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public class WareHouseHandler extends AbstractHandler<MessageTypeEnum> {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">process</span>(<span class="params">String message</span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(message);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Y"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> boolean <span class="title">match</span>(<span class="params">MessageTypeEnum type</span>)</span> {</span><br><span class="line">        <span class="keyword">return</span> MessageTypeEnum.WAREHOUSE == type;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> {</span><br><span class="line">        AbstractHandler<MessageTypeEnum> order = <span class="keyword">new</span> OrderHandler();</span><br><span class="line">        order.process(MessageTypeEnum.ORDER, <span class="string">"order"</span>);</span><br><span class="line"></span><br><span class="line">        AbstractHandler<MessageTypeEnum> warehousse = <span class="keyword">new</span> WareHouseHandler();</span><br><span class="line">        warehousse.process(MessageTypeEnum.WAREHOUSE, <span class="string">"warehousse"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><img alt="template" class="post-img b-lazy" data-img="/images/common/template.png" data-index="0" data-src="/images/common/template.png"><br>解读： </p>
<h4 id="1-1-2-模板模式使用"><a href="#1-1-2-模板模式使用" class="headerlink" title="1.1.2 模板模式使用"></a>1.1.2 模板模式使用</h4><p>Spring IOC容器初始化</p>
<h3 id="1-2-桥接模式-Bridge-Pattern"><a href="#1-2-桥接模式-Bridge-Pattern" class="headerlink" title="1.2 桥接模式(Bridge Pattern)"></a>1.2 桥接模式(Bridge Pattern)</h3><p>介绍：将抽象部分与实现部分分离，使它们都可以独立的变化。<br>使用场景：</p>
<ol>
<li>如果一个系统需要在构件的抽象化角色和具体化角色之间增加更多的灵活性，避免在两个层次之间建立静态的继承联系，通过桥接模式可以使它们在抽象层建立一个关联关系。 </li>
<li>对于那些不希望使用继承或因为多层次继承导致系统类的个数急剧增加的系统，桥接模式尤为适用。</li>
<li>一个类存在两个独立变化的维度，且这两个维度都需要进行扩展。<h4 id="1-2-1示例"><a href="#1-2-1示例" class="headerlink" title="1.2.1示例"></a>1.2.1示例</h4><figure class="highlight c#"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">Brand</span> {</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">open</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">close</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">call</span>(<span class="params"></span>)</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">XiaoMi</span> <span class="title">implements</span> <span class="title">Brand</span> {</span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"Xiaomi open"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"Xiaomi close"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"Xiaomi call"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Iphone</span> <span class="title">implements</span> <span class="title">Brand</span> {</span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"Iphone open"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"Iphone close"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"Iphone call"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 桥接类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Phone</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 组合品牌</span></span><br><span class="line">    <span class="keyword">private</span> Brand brand;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Phone</span>(<span class="params">Brand brand</span>)</span>{</span><br><span class="line">        super();</span><br><span class="line">        <span class="keyword">this</span>.brand = brand;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">open</span>(<span class="params"></span>)</span> {</span><br><span class="line">        brand.open();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">close</span>(<span class="params"></span>)</span> {</span><br><span class="line">        brand.close();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">call</span>(<span class="params"></span>)</span> {</span><br><span class="line">        brand.call();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FoledPhone</span> <span class="title">extends</span> <span class="title">Phone</span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FoledPhone</span>(<span class="params">Brand brand</span>)</span> {</span><br><span class="line">        super(brand);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span>(<span class="params"></span>)</span> {</span><br><span class="line">        super.open();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"折叠式手机"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span>(<span class="params"></span>)</span> {</span><br><span class="line">        super.close();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"折叠式手机"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span>(<span class="params"></span>)</span> {</span><br><span class="line">        super.call();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"折叠式手机"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UpRightPhone</span> <span class="title">extends</span> <span class="title">Phone</span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UpRightPhone</span>(<span class="params">Brand brand</span>)</span> {</span><br><span class="line">        super(brand);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span>(<span class="params"></span>)</span> {</span><br><span class="line">        super.open();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"直立式手机"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span>(<span class="params"></span>)</span> {</span><br><span class="line">        super.close();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"直立式手机"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span>(<span class="params"></span>)</span> {</span><br><span class="line">        super.call();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"直立式手机"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span>{</span><br><span class="line">        Phone foledPhone = <span class="keyword">new</span> FoledPhone(<span class="keyword">new</span> Iphone());</span><br><span class="line">        foledPhone.open();</span><br><span class="line">        foledPhone.close();</span><br><span class="line">        foledPhone.call();</span><br><span class="line"></span><br><span class="line">        Phone upRightPhone = <span class="keyword">new</span> UpRightPhone(<span class="keyword">new</span> XiaoMi());</span><br><span class="line">        upRightPhone.open();</span><br><span class="line">        upRightPhone.close();</span><br><span class="line">        upRightPhone.call();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<img alt="bridge" class="post-img b-lazy" data-img="/images/common/bridge.png" data-index="1" data-src="/images/common/bridge.png"><br>解读：Phone作为桥接类，将不同的Brand通过聚合的方式组合起来。<h4 id="1-2-2-桥接模式使用"><a href="#1-2-2-桥接模式使用" class="headerlink" title="1.2.2 桥接模式使用"></a>1.2.2 桥接模式使用</h4>JDBC中的Driver</li>
</ol>
<h3 id="1-3-装饰器模式-Decorator-Pattern"><a href="#1-3-装饰器模式-Decorator-Pattern" class="headerlink" title="1.3 装饰器模式(Decorator Pattern)"></a>1.3 装饰器模式(Decorator Pattern)</h3><p>介绍：动态地给一个对象添加一些额外的职责。就增加功能来说，装饰器模式相比生成子类更为灵活。<br>使用场景：</p>
<ol>
<li>扩展一个类的功能。 </li>
<li>动态增加功能，动态撤销。<h4 id="1-3-1示例"><a href="#1-3-1示例" class="headerlink" title="1.3.1示例"></a>1.3.1示例</h4><figure class="highlight c#"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 整体抽象出来</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">Drink</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String desc;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> price = <span class="number">0.0f</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重点：计算费用，由子类实现</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">float</span> <span class="title">cost</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDesc</span>(<span class="params"></span>)</span> {</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDesc</span>(<span class="params">String desc</span>)</span> {</span><br><span class="line">        <span class="keyword">this</span>.desc = desc;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getPrice</span>(<span class="params"></span>)</span> {</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span>(<span class="params"><span class="keyword">float</span> price</span>)</span> {</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 被装饰者</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Coffee</span> <span class="title">extends</span> <span class="title">Drink</span>{</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">cost</span>(<span class="params"></span>)</span> {</span><br><span class="line">        <span class="keyword">return</span> super.getPrice();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Espresso</span> <span class="title">extends</span> <span class="title">Coffee</span> {</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Espresso</span>(<span class="params"></span>)</span>{</span><br><span class="line">        setDesc(<span class="string">"意大利咖啡"</span>);</span><br><span class="line">        setPrice(<span class="number">6.0f</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LongBlack</span> <span class="title">extends</span> <span class="title">Coffee</span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LongBlack</span>(<span class="params"></span>)</span>{</span><br><span class="line">        setDesc(<span class="string">"美式咖啡"</span>);</span><br><span class="line">        setPrice(<span class="number">5.0f</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 装饰者</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Decorator</span> <span class="title">extends</span> <span class="title">Drink</span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 被装饰者</span></span><br><span class="line">    <span class="keyword">private</span> Drink drink;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Decorator</span>(<span class="params">Drink drink</span>)</span>{</span><br><span class="line">        <span class="keyword">this</span>.drink = drink;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//组合</span></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">cost</span>(<span class="params"></span>)</span> {</span><br><span class="line">        <span class="keyword">return</span> super.getPrice() + drink.getPrice();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDesc</span>(<span class="params"></span>)</span> {</span><br><span class="line">        <span class="keyword">return</span> super.getDesc() + <span class="string">"+"</span> + drink.getDesc();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Milk</span> <span class="title">extends</span> <span class="title">Decorator</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Milk</span>(<span class="params">Drink drink</span>)</span> {</span><br><span class="line">        super(drink);</span><br><span class="line">        setDesc(<span class="string">"牛奶"</span>);</span><br><span class="line">        setPrice(<span class="number">2.0f</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Chocolate</span> <span class="title">extends</span> <span class="title">Decorator</span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Chocolate</span>(<span class="params">Drink drink</span>)</span> {</span><br><span class="line">        super(drink);</span><br><span class="line">        setDesc(<span class="string">"巧克力"</span>);</span><br><span class="line">        setPrice(<span class="number">3.0f</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span>{</span><br><span class="line">        Drink order = <span class="keyword">new</span> Espresso();</span><br><span class="line">        System.<span class="keyword">out</span>.println(order.cost());</span><br><span class="line">        System.<span class="keyword">out</span>.println(order.getDesc());</span><br><span class="line">        order = <span class="keyword">new</span> Milk(order);</span><br><span class="line">        System.<span class="keyword">out</span>.println(order.cost());</span><br><span class="line">        System.<span class="keyword">out</span>.println(order.getDesc());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<img alt="decorator" class="post-img b-lazy" data-img="/images/common/decorator.png" data-index="2" data-src="/images/common/decorator.png"><br>解读：Decorator作为装饰者，通过组合的方式装饰Coffee，Decorator装饰者和Coffee被装饰者两者拥有共同的父类。<h4 id="1-3-2-装饰器模式使用"><a href="#1-3-2-装饰器模式使用" class="headerlink" title="1.3.2 装饰器模式使用"></a>1.3.2 装饰器模式使用</h4>JDK中的IO结构</li>
</ol>
<h3 id="1-4-组合模式-Composite-Pattern"><a href="#1-4-组合模式-Composite-Pattern" class="headerlink" title="1.4 组合模式(Composite Pattern)"></a>1.4 组合模式(Composite Pattern)</h3><p>介绍：将对象组合成<strong>树形结构</strong>以表示”部分-整体”的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性。<br>使用场景：</p>
<ol>
<li><p>算术表达式包括操作数、操作符和另一个操作数，其中，另一个操作符也可以是操作数、操作符和另一个操作数。 </p>
</li>
<li><p>在 JAVA AWT 和 SWING 中，对于 Button 和 Checkbox 是树叶，Container 是树枝。</p>
<h4 id="1-4-1示例"><a href="#1-4-1示例" class="headerlink" title="1.4.1示例"></a>1.4.1示例</h4><figure class="highlight c#"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 抽象类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">OrganizationComponent</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String desc;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">add</span>(<span class="params">OrganizationComponent organizationComponent</span>)</span>{</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span>  UnsupportedOperationException();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">remove</span>(<span class="params">OrganizationComponent organizationComponent</span>)</span>{</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span>  UnsupportedOperationException();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">print</span>(<span class="params"></span>)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">OrganizationComponent</span>(<span class="params">String name, String desc</span>)</span> {</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.desc = desc;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span>(<span class="params"></span>)</span> {</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span>(<span class="params">String name</span>)</span> {</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDesc</span>(<span class="params"></span>)</span> {</span><br><span class="line">        <span class="keyword">return</span> desc;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDesc</span>(<span class="params">String desc</span>)</span> {</span><br><span class="line">        <span class="keyword">this</span>.desc = desc;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">University</span> <span class="title">extends</span> <span class="title">OrganizationComponent</span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 聚合</span></span><br><span class="line">    List<OrganizationComponent> organizationComponents = <span class="keyword">new</span> ArrayList<>();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">University</span>(<span class="params">String name, String desc</span>)</span> {</span><br><span class="line">        super(name, desc);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">add</span>(<span class="params">OrganizationComponent organizationComponent</span>)</span> {</span><br><span class="line">        organizationComponents.<span class="keyword">add</span>(organizationComponent);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">remove</span>(<span class="params">OrganizationComponent organizationComponent</span>)</span> {</span><br><span class="line">        organizationComponent.<span class="keyword">remove</span>(organizationComponent);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="keyword">this</span>.getName());</span><br><span class="line">        <span class="keyword">for</span> (OrganizationComponent organization : organizationComponents) {</span><br><span class="line">            organization.print();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">College</span> <span class="title">extends</span> <span class="title">OrganizationComponent</span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 聚合</span></span><br><span class="line">    List<OrganizationComponent> organizationComponents = <span class="keyword">new</span> ArrayList<>();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">College</span>(<span class="params">String name, String desc</span>)</span> {</span><br><span class="line">        super(name, desc);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">add</span>(<span class="params">OrganizationComponent organizationComponent</span>)</span> {</span><br><span class="line">        organizationComponents.<span class="keyword">add</span>(organizationComponent);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">remove</span>(<span class="params">OrganizationComponent organizationComponent</span>)</span> {</span><br><span class="line">        organizationComponent.<span class="keyword">remove</span>(organizationComponent);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="keyword">this</span>.getName());</span><br><span class="line">        <span class="keyword">for</span> (OrganizationComponent organization : organizationComponents) {</span><br><span class="line">            organization.print();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * leaf叶子节点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Department</span> <span class="title">extends</span> <span class="title">OrganizationComponent</span>{</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Department</span>(<span class="params">String name, String desc</span>)</span> {</span><br><span class="line">        super(name, desc);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="keyword">this</span>.getName());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String args[]</span>)</span>{</span><br><span class="line">        OrganizationComponent university = <span class="keyword">new</span> University(<span class="string">"程序员大学"</span>, <span class="string">"万物皆明辨可惜"</span>);</span><br><span class="line">        university.<span class="keyword">add</span>(<span class="keyword">new</span> College(<span class="string">"计算机学院"</span>, <span class="string">"万物皆计算机"</span>));</span><br><span class="line">        university.<span class="keyword">add</span>(<span class="keyword">new</span> College(<span class="string">"数学学院"</span>, <span class="string">"万物皆数学"</span>));</span><br><span class="line">        university.print();</span><br><span class="line"></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"----------------------"</span>);</span><br><span class="line">        OrganizationComponent college = <span class="keyword">new</span> College(<span class="string">"物理学院"</span>, <span class="string">"万物皆物理"</span>);</span><br><span class="line">        college.<span class="keyword">add</span>(<span class="keyword">new</span> Department(<span class="string">"物理一班"</span>, <span class="string">"一班一班"</span>));</span><br><span class="line">        college.<span class="keyword">add</span>(<span class="keyword">new</span> Department(<span class="string">"物理二班"</span>, <span class="string">"二班二班"</span>));</span><br><span class="line">        university.<span class="keyword">add</span>(college);</span><br><span class="line">        university.print();</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><img alt="composite" class="post-img b-lazy" data-img="/images/common/composite.png" data-index="3" data-src="/images/common/composite.png"><br>解读：College和University通过聚合的方式组合起来，可以很方便的增加和删除，而叶子节点是最小的节点，不需要增加和删除。需要注意的是这里的College和University继承了同一个抽象类，需具有相同的部分。</p>
<h4 id="1-4-2-组合模式使用"><a href="#1-4-2-组合模式使用" class="headerlink" title="1.4.2 组合模式使用"></a>1.4.2 组合模式使用</h4><p>JDK中的HashMap</p>
</li>
</ol>
<h3 id="1-5-外观模式-Facade-Pattern"><a href="#1-5-外观模式-Facade-Pattern" class="headerlink" title="1.5 外观模式(Facade Pattern)"></a>1.5 外观模式(Facade Pattern)</h3><p>介绍：为子系统中的一组接口提供一个一致的界面，外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。<br>使用场景：</p>
<ol>
<li>为复杂的模块或子系统提供外界访问的模块。 </li>
<li>子系统相对独立。 </li>
<li>预防低水平人员带来的风险。<h4 id="1-5-1示例"><a href="#1-5-1示例" class="headerlink" title="1.5.1示例"></a>1.5.1示例</h4><figure class="highlight c#"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">Shape</span> {</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">draw</span>(<span class="params"></span>)</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Square</span> <span class="title">implements</span> <span class="title">Shape</span> {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"Square::draw()"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Circle</span> <span class="title">implements</span> <span class="title">Shape</span> {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"Circle::draw()"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Rectangle</span> <span class="title">implements</span> <span class="title">Shape</span> {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"Rectangle::draw()"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 外观类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ShapeMaker</span> {</span><br><span class="line">    <span class="keyword">private</span> Shape circle;</span><br><span class="line">    <span class="keyword">private</span> Shape rectangle;</span><br><span class="line">    <span class="keyword">private</span> Shape square;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShapeMaker</span>(<span class="params"></span>)</span> {</span><br><span class="line">        <span class="comment">// 实例化属性，可以用单例模式实例化</span></span><br><span class="line">        circle = <span class="keyword">new</span> Circle();</span><br><span class="line">        rectangle = <span class="keyword">new</span> Rectangle();</span><br><span class="line">        square = <span class="keyword">new</span> Square();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span>(<span class="params"></span>)</span>{</span><br><span class="line">        circle.draw();</span><br><span class="line">        rectangle.draw();</span><br><span class="line">        square.draw();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span> {</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> {</span><br><span class="line">        ShapeMaker shapeMaker = <span class="keyword">new</span> ShapeMaker();</span><br><span class="line">        shapeMaker.draw();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<img alt="facade" class="post-img b-lazy" data-img="/images/common/facade.png" data-index="4" data-src="/images/common/facade.png"><br>解读：ShapeMaker作为外观类，通过组合的形式，把内部的细节都封装了。使用者只需要通过外观类进行调用即可。</li>
</ol>
<h4 id="1-5-2-外观模式使用"><a href="#1-5-2-外观模式使用" class="headerlink" title="1.5.2 外观模式使用"></a>1.5.2 外观模式使用</h4><p>Mybatis中的Configuration</p>
<h3 id="1-6-享元模式-Flyweight-Pattern"><a href="#1-6-享元模式-Flyweight-Pattern" class="headerlink" title="1.6 享元模式(Flyweight Pattern)"></a>1.6 享元模式(Flyweight Pattern)</h3><p>介绍：也叫蝇量模式，运用共享技术有效地支持大量细粒度的对象。(注意划分<strong>外部状态和内部状态</strong>，否则可能会引起线程安全问题。这些类必须有一个工厂对象加以控制。)<br>使用场景：</p>
<ol>
<li>JAVA 中的 String，如果有则返回，如果没有则创建一个字符串保存在字符串缓存池里面。 </li>
<li>数据库的数据池。<h4 id="1-6-1示例"><a href="#1-6-1示例" class="headerlink" title="1.6.1示例"></a>1.6.1示例</h4><figure class="highlight c#"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">WebSite</span> {</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">used</span>(<span class="params">User user</span>)</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ConcreateWebSite</span> <span class="title">extends</span> <span class="title">WebSite</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String type = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConcreateWebSite</span>(<span class="params">String type</span>)</span>{</span><br><span class="line">        <span class="keyword">this</span>.type = type;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">used</span>(<span class="params">User user</span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"user"</span> + user.getName() + <span class="string">", type:"</span> + type);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">User</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span>(<span class="params"></span>)</span> {</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span>(<span class="params">String name</span>)</span> {</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span>(<span class="params">String name</span>)</span> {</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">**</span><br><span class="line"> * 享元池</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">WebSiteFactory</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> HashMap<String, ConcreateWebSite> pool = <span class="keyword">new</span> HashMap<>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在享元池中取，如果没有则创建</span></span><br><span class="line"><span class="comment">     * @param type</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebSite <span class="title">getWebSiteByType</span>(<span class="params">String type</span>)</span>{</span><br><span class="line">        <span class="keyword">if</span> (!pool.containsKey(type)){</span><br><span class="line">            pool.put(type, <span class="keyword">new</span> ConcreateWebSite(type));</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> pool.<span class="keyword">get</span>(type);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getWebSitePoolSize</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="keyword">return</span> pool.size();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> {</span><br><span class="line">        WebSiteFactory webSiteFactory = <span class="keyword">new</span> WebSiteFactory();</span><br><span class="line">        webSiteFactory.getWebSiteByType(<span class="string">"news"</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(webSiteFactory.getWebSitePoolSize());</span><br><span class="line">        webSiteFactory.getWebSiteByType(<span class="string">"blog"</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(webSiteFactory.getWebSitePoolSize());</span><br><span class="line">        webSiteFactory.getWebSiteByType(<span class="string">"shop"</span>);</span><br><span class="line">        System.<span class="keyword">out</span>.println(webSiteFactory.getWebSitePoolSize());</span><br><span class="line"></span><br><span class="line">        WebSite news = webSiteFactory.getWebSiteByType(<span class="string">"news"</span>);</span><br><span class="line">        news.used(<span class="keyword">new</span> User(<span class="string">"A"</span>));</span><br><span class="line">        System.<span class="keyword">out</span>.println(webSiteFactory.getWebSitePoolSize());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<img alt="flyweight" class="post-img b-lazy" data-img="/images/common/flyweight.png" data-index="5" data-src="/images/common/flyweight.png"><br>解读：通过整理内部状态，设计享元池，进行共享，减少了对象的创建。</li>
</ol>
<h4 id="1-6-2-享元模式使用"><a href="#1-6-2-享元模式使用" class="headerlink" title="1.6.2 享元模式使用"></a>1.6.2 享元模式使用</h4><p>Java中的String常量池、Integer.valueOf()</p>
<h3 id="1-7-代理模式-Proxy-Pattern"><a href="#1-7-代理模式-Proxy-Pattern" class="headerlink" title="1.7 代理模式(Proxy Pattern)"></a>1.7 代理模式(Proxy Pattern)</h3><p>介绍：为其他对象提供一种代理以控制对这个对象的访问。代理模式有不同的形式，主要有三种：静态代理、动态代理(JDK代理、接口代理)、Cglib代理(可以在内存动态的创建对象，而不需要实习接口，属于动态代理)。<br>使用场景：</p>
<ol>
<li>远程代理。 </li>
<li>虚拟代理。 </li>
<li>Copy-on-Write 代理。 </li>
<li>保护（Protect or Access）代理。</li>
<li>Cache代理。 </li>
<li>防火墙（Firewall）代理。 </li>
<li>同步化（Synchronization）代理。 </li>
<li>智能引用（Smart Reference）代理。<h4 id="1-7-静态代理"><a href="#1-7-静态代理" class="headerlink" title="1.7.静态代理"></a>1.7.静态代理</h4><figure class="highlight c#"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">TeacherDao</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">teach</span>(<span class="params"></span>)</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TeacherDaoImpl</span> <span class="title">implements</span> <span class="title">TeacherDao</span> {</span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teach</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"teaching"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 代理对象</span></span><br><span class="line"><span class="comment"> * 静态代理，需要实现目标接口，聚合目标对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TeachDaoProxy</span> <span class="title">implements</span> <span class="title">TeacherDao</span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 目标对象</span></span><br><span class="line">    <span class="keyword">private</span> TeacherDao target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TeachDaoProxy</span>(<span class="params">TeacherDao target</span>)</span>{</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teach</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"proxy start"</span>);</span><br><span class="line">        target.teach();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"proxy end"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> {</span><br><span class="line">        TeachDaoProxy proxy = <span class="keyword">new</span> TeachDaoProxy(<span class="keyword">new</span> TeacherDaoImpl());</span><br><span class="line">        <span class="comment">// 通过代理对象，调用被代理对象的方法</span></span><br><span class="line">        proxy.teach();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<img alt="staticproxy" class="post-img b-lazy" data-img="/images/common/staticproxy.png" data-index="6" data-src="/images/common/staticproxy.png"><br>解读：TeachDaoProxy代理通过实现目标接口，聚合目标对象，进行静态代理。最后通过代理对象，调用被代理对象的方法。</li>
</ol>
<h4 id="1-7-2-动态代理"><a href="#1-7-2-动态代理" class="headerlink" title="1.7.2 动态代理"></a>1.7.2 动态代理</h4><figure class="highlight c#"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">TeacherDao</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">teach</span>(<span class="params"></span>)</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TeacherDaoImpl</span> <span class="title">implements</span> <span class="title">TeacherDao</span> {</span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teach</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"teaching"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 代理对象</span></span><br><span class="line"><span class="comment"> * 动态代理，利用JDK的newProxyInstance方法，动态的在内存中构建代理对象</span></span><br><span class="line"><span class="comment"> * java.lang.reflect.Proxy\</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 根据传入的目标对象，利用反射机制，返回一个代理对象。然后通过代理对象，调用目标对象方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ProxyFactory</span> {</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 目标对象</span></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyFactory</span>(<span class="params">Object target</span>)</span>{</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getProxyInstance</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ClassLoader loader 指定当前目标对象使用的类加载器，获取加载器的方法固定</span></span><br><span class="line"><span class="comment">         * Class<?>[] interfaces 目标对象实现的接口类型，使用方向方式确认类型</span></span><br><span class="line"><span class="comment">         * InvocationHandler h 事情处理，执行目标对象的方法是，会触发事情处理器方法</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ClassLoader loader = target.getClass().getClassLoader();</span><br><span class="line">        Class<?>[] interfaces = target.getClass().getInterfaces();</span><br><span class="line">        InvocationHandler h = (Object proxy, Method method, Object[] args) -> {</span><br><span class="line">                System.<span class="keyword">out</span>.println(<span class="string">"反射机制调用目标对象的方法"</span>);</span><br><span class="line">                Object invoke = method.invoke(target, args);</span><br><span class="line">                System.<span class="keyword">out</span>.println(<span class="string">"JDK代理提交"</span>);</span><br><span class="line">                <span class="keyword">return</span> invoke;</span><br><span class="line">        };</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(loader, interfaces, h);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> {</span><br><span class="line">        TeacherDao target = <span class="keyword">new</span> TeacherDaoImpl();</span><br><span class="line">        TeacherDao proxy = (TeacherDao)<span class="keyword">new</span> ProxyFactory(target).getProxyInstance();</span><br><span class="line">        <span class="comment">// 通过代理对象，调用目标对象的方法</span></span><br><span class="line">        proxy.teach();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><img alt="dynamicproxy" class="post-img b-lazy" data-img="/images/common/dynamicproxy.png" data-index="7" data-src="/images/common/dynamicproxy.png"><br>解读：ProxyFactory动态代理，利用JDK的newProxyInstance方法，动态的在内存中构建代理对象。最后通过代理对象，调用被代理对象的方法。</p>
<h4 id="1-7-3-Cglib代理"><a href="#1-7-3-Cglib代理" class="headerlink" title="1.7.3 Cglib代理"></a>1.7.3 Cglib代理</h4><p>Cglib是一个强大的高性能的代码生成包，被许多框架使用，例如：Spring AOP。Cglib包的底层是通过字节码处理框架ASM来转换字节码并生产新的类。<br> <strong>cglib是针对类来实现代理的，原理是对指定的目标类生成一个子类，并覆盖其中方法实现增强，但因为采用的是继承，所以不能对final修饰的类进行代理</strong></p>
<figure class="highlight c#"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TeacherDao</span> {</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teach</span>(<span class="params"></span>)</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"teaching"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MethodInterceptor 方法拦截器</span></span><br><span class="line"><span class="comment"> * cglib是针对类来实现代理的，原理是对指定的目标类生成一个子类，并覆盖其中方法实现增强，但因为采用的是继承，所以不能对final修饰的类进行代理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ProxyFactory</span> <span class="title">implements</span> <span class="title">MethodInterceptor</span> {</span><br><span class="line"></span><br><span class="line">    Object target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyFactory</span>(<span class="params">Object target</span>)</span>{</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回target目标对象的代理对象</span></span><br><span class="line"><span class="comment">     * 调用代理对象的时候，会触发调用intercept()</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getProxyInstance</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="comment">// 1.cglib增强类</span></span><br><span class="line">        Enhancer enhancer = <span class="keyword">new</span> Enhancer();</span><br><span class="line">        <span class="comment">// 2.设置父类</span></span><br><span class="line">        enhancer.setSuperclass(target.getClass());</span><br><span class="line">        <span class="comment">// 3.设置回调函数</span></span><br><span class="line">        enhancer.setCallback(<span class="keyword">this</span>);</span><br><span class="line">        <span class="comment">// 4.创建子类对象，即代理对象</span></span><br><span class="line">        <span class="keyword">return</span> enhancer.create();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 重写intercept方法，实现对被代理对象(目标对象)方法调用</span></span><br><span class="line"><span class="comment">     * @param o</span></span><br><span class="line"><span class="comment">     * @param method</span></span><br><span class="line"><span class="comment">     * @param objects 方法参数</span></span><br><span class="line"><span class="comment">     * @param methodProxy</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     * @throws Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span>(<span class="params">Object o, Method method, Object[] objects, MethodProxy methodProxy</span>) throws Throwable</span> {</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"cglib start"</span>);</span><br><span class="line">        Object invoke = method.invoke(target, objects);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">"cglib end"</span>);</span><br><span class="line">        <span class="keyword">return</span> invoke;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span> {</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> {</span><br><span class="line">        TeacherDao target = <span class="keyword">new</span> TeacherDao();</span><br><span class="line">        TeacherDao proxy = (TeacherDao)<span class="keyword">new</span> ProxyFactory(target).getProxyInstance();</span><br><span class="line">        <span class="comment">// 通过代理对象，调用目标对象的方法</span></span><br><span class="line">        proxy.teach();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p><img alt="cglibproxy" class="post-img b-lazy" data-img="/images/common/cglibproxy.png" data-index="8" data-src="/images/common/cglibproxy.png"><br>解读：ProxyFactory利用Cglib代理，当通过代理对象，调用目标对象时候，会触发MethodInterceptor方法拦截器，通过重写intercept方法，实现对被代理对象(目标对象)方法调用。</p>
<h4 id="1-7-4-对比"><a href="#1-7-4-对比" class="headerlink" title="1.7.4 对比"></a>1.7.4 对比</h4><p>JDK代理：目标对象实现接口<br>Cglib代理：目标对象不需要实现接口</p>
<h4 id="1-7-5-代理模式使用"><a href="#1-7-5-代理模式使用" class="headerlink" title="1.7.5 代理模式使用"></a>1.7.5 代理模式使用</h4>
                </article>
                <ul class="tags-postTags">
                    
                </ul>
            </div>
        </div>
    </div>

    
    <nav id="gobottom" class="pagination">
        
        <span class="prev-next-post">·</span>
        
        <a class="next-post" title="从零开始设计模式第3章-结构型模式(七种)" href="/2020/01/12/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%AC3%E7%AB%A0/">
            从零开始设计模式第3章-结构型模式(七种) →
        </a>
        
    </nav>

    
    <div class="inner">
        <div id="comment"></div>
    </div>
    
</div>

<div class="toc-bar">
    <div class="toc-btn-bar">
        <a href="#site-main" class="toc-btn">
            <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M793.024 710.272a32 32 0 1 0 45.952-44.544l-310.304-320a32 32 0 0 0-46.4 0.48l-297.696 320a32 32 0 0 0 46.848 43.584l274.752-295.328 286.848 295.808z"/></svg>
        </a>
        <div class="toc-btn toc-switch">
            <svg class="toc-open" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M779.776 480h-387.2a32 32 0 0 0 0 64h387.2a32 32 0 0 0 0-64M779.776 672h-387.2a32 32 0 0 0 0 64h387.2a32 32 0 0 0 0-64M256 288a32 32 0 1 0 0 64 32 32 0 0 0 0-64M392.576 352h387.2a32 32 0 0 0 0-64h-387.2a32 32 0 0 0 0 64M256 480a32 32 0 1 0 0 64 32 32 0 0 0 0-64M256 672a32 32 0 1 0 0 64 32 32 0 0 0 0-64"/></svg>
            <svg class="toc-close hide" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 960c-247.039484 0-448-200.960516-448-448S264.960516 64 512 64 960 264.960516 960 512 759.039484 960 512 960zM512 128.287273c-211.584464 0-383.712727 172.128262-383.712727 383.712727 0 211.551781 172.128262 383.712727 383.712727 383.712727 211.551781 0 383.712727-172.159226 383.712727-383.712727C895.712727 300.415536 723.551781 128.287273 512 128.287273z"/><path d="M557.05545 513.376159l138.367639-136.864185c12.576374-12.416396 12.672705-32.671738 0.25631-45.248112s-32.704421-12.672705-45.248112-0.25631l-138.560301 137.024163-136.447897-136.864185c-12.512727-12.512727-32.735385-12.576374-45.248112-0.063647-12.512727 12.480043-12.54369 32.735385-0.063647 45.248112l136.255235 136.671523-137.376804 135.904314c-12.576374 12.447359-12.672705 32.671738-0.25631 45.248112 6.271845 6.335493 14.496116 9.504099 22.751351 9.504099 8.12794 0 16.25588-3.103239 22.496761-9.247789l137.567746-136.064292 138.687596 139.136568c6.240882 6.271845 14.432469 9.407768 22.65674 9.407768 8.191587 0 16.352211-3.135923 22.591372-9.34412 12.512727-12.480043 12.54369-32.704421 0.063647-45.248112L557.05545 513.376159z"/></svg>
        </div>
        <a href="#gobottom" class="toc-btn">
            <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M231.424 346.208a32 32 0 0 0-46.848 43.584l297.696 320a32 32 0 0 0 46.4 0.48l310.304-320a32 32 0 1 0-45.952-44.544l-286.848 295.808-274.752-295.36z"/></svg>
        </a>
    </div>
    <div class="toc-main">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-行为型模式-11种"><span class="toc-text">1.行为型模式(11种)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-模板模式-Template-Method-Pattern"><span class="toc-text">1.1 模板模式(Template Method Pattern)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-1示例"><span class="toc-text">1.1.1示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-2-模板模式使用"><span class="toc-text">1.1.2 模板模式使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-桥接模式-Bridge-Pattern"><span class="toc-text">1.2 桥接模式(Bridge Pattern)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-1示例"><span class="toc-text">1.2.1示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-桥接模式使用"><span class="toc-text">1.2.2 桥接模式使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-装饰器模式-Decorator-Pattern"><span class="toc-text">1.3 装饰器模式(Decorator Pattern)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1示例"><span class="toc-text">1.3.1示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-装饰器模式使用"><span class="toc-text">1.3.2 装饰器模式使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-组合模式-Composite-Pattern"><span class="toc-text">1.4 组合模式(Composite Pattern)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-1示例"><span class="toc-text">1.4.1示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2-组合模式使用"><span class="toc-text">1.4.2 组合模式使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-外观模式-Facade-Pattern"><span class="toc-text">1.5 外观模式(Facade Pattern)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-1示例"><span class="toc-text">1.5.1示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-2-外观模式使用"><span class="toc-text">1.5.2 外观模式使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-享元模式-Flyweight-Pattern"><span class="toc-text">1.6 享元模式(Flyweight Pattern)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-1示例"><span class="toc-text">1.6.1示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-2-享元模式使用"><span class="toc-text">1.6.2 享元模式使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-代理模式-Proxy-Pattern"><span class="toc-text">1.7 代理模式(Proxy Pattern)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-7-静态代理"><span class="toc-text">1.7.静态代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-7-2-动态代理"><span class="toc-text">1.7.2 动态代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-7-3-Cglib代理"><span class="toc-text">1.7.3 Cglib代理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-7-4-对比"><span class="toc-text">1.7.4 对比</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-7-5-代理模式使用"><span class="toc-text">1.7.5 代理模式使用</span></a></li></ol></li></ol></li></ol>
    </div>
</div>



<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>




	</div>
	


<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
            

<article class="read-next-card" style="background-image: url(/images/header_image.png)">
  <header class="read-next-card-header">
    <small class="read-next-card-header-sitetitle">— ADay Studio —</small>
    <h3 class="read-next-card-header-title">Recent Posts</h3>
  </header>
  <div class="read-next-divider">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/>
    </svg>
  </div>
  <div class="read-next-card-content">
    <ul>
      
      
      
      <li>
        <a href="/2020/03/15/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%AC4%E7%AB%A0/">从零开始设计模式第4章-行为型模式(七种)</a>
      </li>
      
      
      
      <li>
        <a href="/2020/01/12/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%AC3%E7%AB%A0/">从零开始设计模式第3章-结构型模式(七种)</a>
      </li>
      
      
      
      <li>
        <a href="/2020/01/06/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%AC2%E7%AB%A0/">从零开始设计模式第2章-创建型模式(五种)</a>
      </li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
  </div>
  <footer class="read-next-card-footer">
    <a href="/archives">  MORE  → </a>
  </footer>
</article>

            
            
            

<article class="read-next-card" style="background-image: url(/images/header_image.png)">
    <header class="read-next-card-header tagcloud-card">
        
        <h3 class="read-next-card-header-title"></h3>
    </header>
    <div class="read-next-card-content">
        <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/">从零开始</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%88%B6%E4%BD%9C%E6%B8%B8%E6%88%8F/">从零开始制作游戏</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">从零开始设计模式</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%AA%E5%AE%9A%E4%B9%89/">未定义</a></li></ul>
    </div>
</article>


            
            
        </div>
    </div>
</aside>

	




<div id="search" class="search-overlay">
    <div class="search-form">
        
        <div class="search-overlay-logo">
        	<img src="/images/avatar.png" alt="ADay Studio">
        </div>
        
        <input id="local-search-input" class="search-input" type="text" name="search" placeholder="Search ...">
        <a class="search-overlay-close" href="#"></a>
    </div>
    <div id="local-search-result"></div>
</div>

<footer class="site-footer outer">
	<div class="site-footer-content inner">
		<div class="copyright">
			<a href="/" title="ADay Studio">ADay Studio © 2020</a>
			
				
			        <span hidden="true" id="/2020/03/15/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%AC%AC4%E7%AB%A0/" class="leancloud-visitors" data-flag-title="从零开始设计模式第4章-行为型模式(七种)">
			            <span>阅读量 </span>
			            <span class="leancloud-visitors-count">0</span>
			        </span>
	    		
    		
		</div>
		<nav class="site-footer-nav">
			
			<a href="https://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
			<a href="https://github.com/xzhih/hexo-theme-casper" title="Casper" target="_blank" rel="noopener">Casper</a>
		</nav>
	</div>
</footer>
	


<script>
    if(window.navigator && navigator.serviceWorker) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for(let registration of registrations) {
                registration.unregister()
            }
        })
    }
</script>


<script id="scriptLoad" src="/js/allinone.min.js" async></script>


<script>
    document.getElementById('scriptLoad').addEventListener('load', function () {
        
        
            var bLazy = new Blazy();
        

        
        

        
        
        
            searchFunc("/");
        
        
    })
</script>




<link rel="stylesheet" href="/photoswipe/photoswipe.css">


<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>


<script src="/photoswipe/photoswipe-ui-default.min.js"></script>





<script id="valineScript" src="//unpkg.com/valine/dist/Valine.min.js" async></script>
<script>
    document.getElementById('valineScript').addEventListener("load", function() {
        new Valine({
            el: '#comment' ,
            verify: true,
            notify: false,
            appId: 'FgTia9oqrUt6omlmYNPBWiCS-gzGzoHsz',
            appKey: 'YnkFr89Dx682KJPi8hwPgGNf',
            placeholder: 'Leave a comment',
            pageSize: 10,
            avatar: 'retro',
            visitor: true
        })
    });
</script>







</body></html>